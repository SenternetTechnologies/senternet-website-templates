<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumina Paints | Professional Color Studio</title>
    <!-- React & Tailwind -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        /* Animations */
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        .animate-slideIn {
            animation: slideIn 0.3s ease-out forwards;
        }

        @keyframes bounceShort {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -10px); }
        }
        .animate-bounce-short {
            animation: bounceShort 2s infinite;
        }

        /* Paint Can Animation */
        .paint-blob {
            transition: fill 0.5s ease, background-color 0.5s ease;
        }

        .gloss-effect {
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 50%);
        }

        .wall-path {
            transition: fill 0.3s ease;
            cursor: pointer;
        }
        .wall-path:hover {
            filter: brightness(0.95);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Icons (Internal SVG Components to ensure stability) ---
        const Icon = ({ path, className = "w-6 h-6" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Droplet: (props) => <Icon {...props} path={<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />} />, 
            ShoppingCart: (props) => <Icon {...props} path={<><circle cx="9" cy="21" r="1" /><circle cx="20" cy="21" r="1" /><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" /></>} />,
            PaintBucket: (props) => <Icon {...props} path={<><path d="M19 11l-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11z" /><path d="M5 2l5 5" /><path d="M2 13h15" /><path d="M22 7v.01" /><path d="M17.15 17.15l2.65 2.65" /></>} />, // Stylized bucket/brush mix
            Palette: (props) => <Icon {...props} path={<><circle cx="13.5" cy="6.5" r=".5" /><circle cx="17.5" cy="10.5" r=".5" /><circle cx="8.5" cy="7.5" r=".5" /><circle cx="6.5" cy="12.5" r=".5" /><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z" /></>} />,
            X: (props) => <Icon {...props} path={<><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></>} />,
            Check: (props) => <Icon {...props} path={<polyline points="20 6 9 17 4 12" />} />,
            Star: (props) => <Icon {...props} path={<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />} />,
        };

        // --- Data & Helpers ---

        const BASE_PALETTE = [
            { id: 1, name: 'Midnight Blue', hex: '#1e3a8a', price: 45 },
            { id: 2, name: 'Burnt Sienna', hex: '#9a3412', price: 42 },
            { id: 3, name: 'Forest Green', hex: '#14532d', price: 45 },
            { id: 4, name: 'Golden Hour', hex: '#eab308', price: 48 },
            { id: 5, name: 'Classic Slate', hex: '#475569', price: 40 },
            { id: 6, name: 'Rose Quartz', hex: '#fb7185', price: 46 },
            { id: 7, name: 'Clean White', hex: '#f1f5f9', price: 35 },
            { id: 8, name: 'Charcoal', hex: '#18181b', price: 40 },
        ];

        const FINISHES = [
            { id: 'matte', name: 'Matte Finish', multiplier: 1, desc: 'Non-reflective, hides imperfections.' },
            { id: 'eggshell', name: 'Eggshell', multiplier: 1.1, desc: 'Velvety sheen, easy to clean.' },
            { id: 'gloss', name: 'High Gloss', multiplier: 1.25, desc: 'Shiny, durable, highlights details.' },
        ];

        // Helper to mix colors
        const mixHexColors = (hex1, hex2) => {
            const hexToRgb = (hex) => {
                let r = 0, g = 0, b = 0;
                if (hex.length === 4) {
                    r = parseInt("0x" + hex[1] + hex[1]);
                    g = parseInt("0x" + hex[2] + hex[2]);
                    b = parseInt("0x" + hex[3] + hex[3]);
                } else if (hex.length === 7) {
                    r = parseInt("0x" + hex[1] + hex[2]);
                    g = parseInt("0x" + hex[3] + hex[4]);
                    b = parseInt("0x" + hex[5] + hex[6]);
                }
                return [r, g, b];
            };

            const rgbToHex = (r, g, b) => {
                return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            };

            const rgb1 = hexToRgb(hex1);
            const rgb2 = hexToRgb(hex2);

            const mixed = [
                Math.round((rgb1[0] + rgb2[0]) / 2),
                Math.round((rgb1[1] + rgb2[1]) / 2),
                Math.round((rgb1[2] + rgb2[2]) / 2),
            ];

            return rgbToHex(mixed[0], mixed[1], mixed[2]);
        };

        // --- Components ---

        const Nav = ({ cartCount, activePage, setPage, toggleCart }) => (
            <nav className="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-slate-200">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between items-center h-20">
                        <div className="flex items-center cursor-pointer" onClick={() => setPage('home')}>
                            <div className="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center mr-3 shadow-lg">
                                <Icons.Droplet className="text-white h-6 w-6" />
                            </div>
                            <span className="text-2xl font-bold text-slate-800 tracking-tight">Lumina<span className="text-indigo-600">.</span></span>
                        </div>
                        
                        <div className="hidden md:flex space-x-8">
                            {['home', 'mixer', 'shop'].map((page) => (
                                <button
                                    key={page}
                                    onClick={() => setPage(page)}
                                    className={`text-sm font-semibold uppercase tracking-wider ${activePage === page ? 'text-indigo-600' : 'text-slate-500 hover:text-slate-800'}`}
                                >
                                    {page}
                                </button>
                            ))}
                        </div>

                        <div className="flex items-center">
                            <button onClick={toggleCart} className="relative p-2 text-slate-500 hover:text-indigo-600 transition">
                                <Icons.ShoppingCart className="h-6 w-6" />
                                {cartCount > 0 && (
                                    <span className="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-500 rounded-full">
                                        {cartCount}
                                    </span>
                                )}
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        );

        const Hero = ({ onCta }) => (
            <div className="relative bg-white overflow-hidden">
                <div className="max-w-7xl mx-auto">
                    <div className="relative z-10 pb-8 bg-white sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32">
                        <main className="mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28">
                            <div className="sm:text-center lg:text-left">
                                <h1 className="text-4xl tracking-tight font-extrabold text-slate-900 sm:text-5xl md:text-6xl">
                                    <span className="block xl:inline">Define your space</span>{' '}
                                    <span className="block text-indigo-600 xl:inline">with true color.</span>
                                </h1>
                                <p className="mt-3 text-base text-slate-500 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-auto">
                                    Experience the most realistic paint selection and mixing technology. Visualize it in your home before you buy.
                                </p>
                                <div className="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
                                    <div className="rounded-md shadow">
                                        <button onClick={onCta} className="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 md:py-4 md:text-lg md:px-10">
                                            Start Mixing
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
                <div className="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 bg-slate-100 flex items-center justify-center">
                   {/* Abstract Paint Splash SVG */}
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" className="w-full h-full opacity-80">
                        <path fill="#4F46E5" d="M44.7,-76.4C58.9,-69.2,71.8,-59.1,79.6,-46.3C87.4,-33.5,90.1,-18,88.7,-3.3C87.3,11.5,81.8,25.4,72.6,37.1C63.4,48.8,50.5,58.3,37.1,65.7C23.7,73.1,9.8,78.5,-2.3,82.5C-14.4,86.5,-24.7,89.2,-36.2,84.9C-47.7,80.6,-60.4,69.4,-70.2,56.7C-80,44,-86.8,29.8,-88.3,15.1C-89.8,0.4,-86,-14.8,-78.6,-28.3C-71.2,-41.8,-60.2,-53.6,-47.6,-61.4C-35,-69.2,-20.8,-73,-6.2,-62.3L0,-51.5Z" transform="translate(100 100)" />
                    </svg>
                </div>
            </div>
        );

        const RoomVisualizer = ({ activeColor }) => {
            const [wallColors, setWallColors] = useState({
                back: '#e2e8f0',
                left: '#cbd5e1',
                right: '#cbd5e1'
            });

            const applyPaint = (wall) => {
                setWallColors(prev => ({
                    ...prev,
                    [wall]: activeColor
                }));
            };

            return (
                <div className="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
                    <div className="p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <h3 className="font-semibold text-slate-700 flex items-center gap-2">
                            <Icons.PaintBucket className="w-4 h-4" /> Room Visualizer
                        </h3>
                        <span className="text-xs text-slate-500 uppercase tracking-wide">Click walls to paint</span>
                    </div>
                    <div className="relative aspect-video w-full">
                        <svg viewBox="0 0 800 500" className="w-full h-full">
                            {/* Perspective definitions */}
                            <defs>
                                <linearGradient id="floorGrad" x1="0" x2="0" y1="0" y2="1">
                                    <stop offset="0%" stopColor="#d5bdaf"/> 
                                    <stop offset="100%" stopColor="#a88b7d"/>
                                </linearGradient>
                                <filter id="shadow">
                                    <feDropShadow dx="2" dy="2" stdDeviation="5" floodOpacity="0.3"/>
                                </filter>
                            </defs>
                            
                            {/* Left Wall */}
                            <path 
                                d="M0 0 L200 100 L200 400 L0 500 Z" 
                                fill={wallColors.left} 
                                className="wall-path"
                                onClick={() => applyPaint('left')}
                            />
                            
                            {/* Back Wall */}
                            <path 
                                d="M200 100 L600 100 L600 400 L200 400 Z" 
                                fill={wallColors.back} 
                                className="wall-path"
                                onClick={() => applyPaint('back')}
                            />
                            
                            {/* Right Wall */}
                            <path 
                                d="M600 100 L800 0 L800 500 L600 400 Z" 
                                fill={wallColors.right} 
                                className="wall-path"
                                onClick={() => applyPaint('right')}
                            />
                            
                            {/* Floor */}
                            <path 
                                d="M0 500 L200 400 L600 400 L800 500 Z" 
                                fill="url(#floorGrad)" 
                            />

                            {/* Lighting Overlay for Realism */}
                            <path d="M0 0 L200 100 L200 400 L0 500 Z" fill="black" fillOpacity="0.1" pointerEvents="none" />
                            <path d="M600 100 L800 0 L800 500 L600 400 Z" fill="black" fillOpacity="0.2" pointerEvents="none" />

                            {/* Furniture (Simple Couch) */}
                            <g transform="translate(250, 320)" filter="url(#shadow)" pointerEvents="none">
                                <path d="M20 40 L280 40 L280 120 L20 120 Z" fill="#475569" /> {/* Base */}
                                <path d="M20 40 L20 0 L280 0 L280 40 Z" fill="#64748b" /> {/* Backrest */}
                                <path d="M0 40 L40 40 L40 120 L0 120 Z" fill="#334155" /> {/* Left Arm */}
                                <path d="M260 40 L300 40 L300 120 L260 120 Z" fill="#334155" /> {/* Right Arm */}
                            </g>
                        </svg>
                        
                        {/* Interactive Tooltip Overlay */}
                        <div className="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full text-xs font-medium text-slate-600 shadow-sm pointer-events-none">
                            Current Brush: <span className="inline-block w-3 h-3 rounded-full ml-1 align-middle border border-slate-300" style={{backgroundColor: activeColor}}></span>
                        </div>
                    </div>
                </div>
            );
        };

        const ColorMixer = ({ activeColor, setActiveColor, addToCart }) => {
            const [base1, setBase1] = useState(BASE_PALETTE[0]);
            const [base2, setBase2] = useState(BASE_PALETTE[6]);
            const [selectedFinish, setSelectedFinish] = useState(FINISHES[0]);

            const mixedColorHex = useMemo(() => mixHexColors(base1.hex, base2.hex), [base1, base2]);
            const price = Math.round(((base1.price + base2.price) / 2) * selectedFinish.multiplier);

            // Update global active color when mix changes
            useEffect(() => {
                setActiveColor(mixedColorHex);
            }, [mixedColorHex]);

            const handleAddToCart = () => {
                const item = {
                    id: Date.now(),
                    name: `Custom Mix (${base1.name} + ${base2.name})`,
                    color: mixedColorHex,
                    finish: selectedFinish.name,
                    price: price,
                    image: null
                };
                addToCart(item);
            };

            return (
                <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 py-12">
                    {/* Controls */}
                    <div className="lg:col-span-4 space-y-8">
                        <div>
                            <h2 className="text-2xl font-bold text-slate-900 mb-6">Mix Studio</h2>
                            
                            <div className="space-y-6">
                                {/* Base 1 */}
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-2">Base Color 1</label>
                                    <div className="grid grid-cols-4 gap-2">
                                        {BASE_PALETTE.map(c => (
                                            <button 
                                                key={`b1-${c.id}`}
                                                onClick={() => setBase1(c)}
                                                className={`h-10 w-10 rounded-full shadow-sm transition-transform hover:scale-110 border-2 ${base1.id === c.id ? 'border-indigo-600 scale-110' : 'border-transparent'}`}
                                                style={{backgroundColor: c.hex}}
                                                title={c.name}
                                            />
                                        ))}
                                    </div>
                                    <div className="mt-2 text-sm text-slate-500 font-medium">{base1.name}</div>
                                </div>

                                {/* Base 2 */}
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-2">Base Color 2</label>
                                    <div className="grid grid-cols-4 gap-2">
                                        {BASE_PALETTE.map(c => (
                                            <button 
                                                key={`b2-${c.id}`}
                                                onClick={() => setBase2(c)}
                                                className={`h-10 w-10 rounded-full shadow-sm transition-transform hover:scale-110 border-2 ${base2.id === c.id ? 'border-indigo-600 scale-110' : 'border-transparent'}`}
                                                style={{backgroundColor: c.hex}}
                                                title={c.name}
                                            />
                                        ))}
                                    </div>
                                    <div className="mt-2 text-sm text-slate-500 font-medium">{base2.name}</div>
                                </div>

                                {/* Finish Selection */}
                                <div>
                                    <label className="block text-sm font-medium text-slate-700 mb-2">Finish Type</label>
                                    <div className="space-y-2">
                                        {FINISHES.map(f => (
                                            <div 
                                                key={f.id}
                                                onClick={() => setSelectedFinish(f)}
                                                className={`p-3 rounded-lg border cursor-pointer flex justify-between items-center transition ${selectedFinish.id === f.id ? 'border-indigo-600 bg-indigo-50' : 'border-slate-200 hover:border-indigo-300'}`}
                                            >
                                                <div>
                                                    <div className="text-sm font-semibold text-slate-900">{f.name}</div>
                                                    <div className="text-xs text-slate-500">{f.desc}</div>
                                                </div>
                                                {selectedFinish.id === f.id && <Icons.Check className="w-4 h-4 text-indigo-600" />}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="pt-6 border-t border-slate-200">
                             <div className="flex justify-between items-end mb-4">
                                <div>
                                    <span className="text-slate-500 text-sm">Estimated Price / Gallon</span>
                                    <div className="text-3xl font-bold text-slate-900">${price}</div>
                                </div>
                            </div>
                            <button 
                                onClick={handleAddToCart}
                                className="w-full bg-slate-900 text-white py-4 rounded-xl font-bold hover:bg-slate-800 transition flex justify-center items-center gap-2"
                            >
                                <Icons.ShoppingCart className="w-5 h-5" /> Add Custom Mix to Cart
                            </button>
                        </div>
                    </div>

                    {/* Visualizer Area */}
                    <div className="lg:col-span-8 space-y-6">
                        {/* The Paint Bucket Visualization */}
                        <div className="flex items-center justify-center p-8 bg-slate-100 rounded-2xl border border-slate-200 relative overflow-hidden">
                             {/* Background Paint Swirl */}
                             <div className="absolute inset-0 opacity-10" style={{background: `radial-gradient(circle at 50% 50%, ${mixedColorHex}, transparent 70%)`}}></div>
                             
                             <div className="relative z-10 text-center">
                                <div className="w-48 h-48 mx-auto rounded-full shadow-2xl border-4 border-white mb-4 relative overflow-hidden">
                                    <div className="absolute inset-0 paint-blob" style={{backgroundColor: mixedColorHex}}></div>
                                    <div className="absolute inset-0 gloss-effect"></div>
                                </div>
                                <h3 className="text-xl font-bold text-slate-800">Resulting Shade</h3>
                                <p className="text-slate-500 font-mono text-sm mt-1">{mixedColorHex.toUpperCase()}</p>
                             </div>

                             {/* Mathematical formula visual */}
                             <div className="absolute bottom-4 left-0 w-full flex justify-center gap-4 text-slate-400 font-bold text-xl opacity-30">
                                 <div className="w-6 h-6 rounded-full" style={{backgroundColor: base1.hex}}></div>
                                 <span>+</span>
                                 <div className="w-6 h-6 rounded-full" style={{backgroundColor: base2.hex}}></div>
                                 <span>=</span>
                                 <div className="w-6 h-6 rounded-full" style={{backgroundColor: mixedColorHex}}></div>
                             </div>
                        </div>

                        {/* Room Preview */}
                        <RoomVisualizer activeColor={mixedColorHex} />
                    </div>
                </div>
            );
        };

        const ProductShop = ({ addToCart, setActiveColor }) => {
            return (
                <div className="py-12">
                     <h2 className="text-3xl font-bold text-slate-900 mb-8">Premium Collections</h2>
                     <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {BASE_PALETTE.map(paint => (
                            <div key={paint.id} className="group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-slate-100 overflow-hidden">
                                {/* Color Preview */}
                                <div 
                                    className="h-48 w-full relative group-hover:scale-105 transition-transform duration-500 cursor-pointer"
                                    style={{backgroundColor: paint.hex}}
                                    onClick={() => setActiveColor(paint.hex)}
                                >
                                    <div className="absolute inset-0 gloss-effect opacity-50"></div>
                                    <div className="absolute bottom-3 right-3 bg-white/90 backdrop-blur p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity">
                                        <Icons.Palette className="w-4 h-4 text-slate-800" />
                                    </div>
                                </div>
                                
                                <div className="p-5">
                                    <div className="flex justify-between items-start mb-2">
                                        <div>
                                            <h3 className="font-bold text-lg text-slate-800">{paint.name}</h3>
                                            <p className="text-xs text-slate-500">Premium Acrylic Latex</p>
                                        </div>
                                        <div className="flex gap-0.5 text-yellow-400">
                                            {[1,2,3,4,5].map(i => <Icons.Star key={i} className="w-3 h-3 fill-current" />)}
                                        </div>
                                    </div>
                                    
                                    <div className="flex items-center justify-between mt-4">
                                        <span className="text-xl font-bold text-slate-900">${paint.price}</span>
                                        <button 
                                            onClick={() => addToCart({
                                                id: Date.now(),
                                                name: paint.name,
                                                color: paint.hex,
                                                price: paint.price,
                                                finish: 'Standard Matte'
                                            })}
                                            className="bg-indigo-600 text-white p-2 rounded-lg hover:bg-indigo-700 transition"
                                        >
                                            <Icons.ShoppingCart className="w-5 h-5" />
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                     </div>
                </div>
            );
        };

        const CartDrawer = ({ isOpen, onClose, cart, removeFromCart, checkout }) => {
            if (!isOpen) return null;

            const total = cart.reduce((sum, item) => sum + item.price, 0);

            return (
                <div className="fixed inset-0 z-[100] flex justify-end">
                    <div className="absolute inset-0 bg-black/30 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col transform transition-transform animate-slideIn">
                        <div className="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                            <h2 className="text-xl font-bold text-slate-800">Your Cart</h2>
                            <button onClick={onClose} className="p-2 hover:bg-slate-200 rounded-full transition">
                                <Icons.X className="w-5 h-5 text-slate-500" />
                            </button>
                        </div>
                        
                        <div className="flex-1 overflow-y-auto p-6 space-y-4">
                            {cart.length === 0 ? (
                                <div className="text-center py-20">
                                    <Icons.PaintBucket className="w-16 h-16 text-slate-300 mx-auto mb-4" />
                                    <p className="text-slate-500">Your cart is empty.</p>
                                    <button onClick={onClose} className="mt-4 text-indigo-600 font-semibold hover:underline">Start Shopping</button>
                                </div>
                            ) : (
                                cart.map((item) => (
                                    <div key={item.id} className="flex gap-4 p-4 bg-white border border-slate-100 rounded-xl shadow-sm">
                                        <div className="w-16 h-16 rounded-lg shadow-inner border border-slate-200" style={{backgroundColor: item.color}}></div>
                                        <div className="flex-1">
                                            <h4 className="font-bold text-slate-800">{item.name}</h4>
                                            <p className="text-sm text-slate-500">{item.finish}</p>
                                            <div className="flex justify-between items-center mt-2">
                                                <span className="font-semibold">${item.price}</span>
                                                <button onClick={() => removeFromCart(item.id)} className="text-xs text-red-500 hover:text-red-700 font-medium">Remove</button>
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>

                        {cart.length > 0 && (
                            <div className="p-6 border-t border-slate-100 bg-slate-50">
                                <div className="flex justify-between items-center mb-4">
                                    <span className="text-slate-600">Subtotal</span>
                                    <span className="text-2xl font-bold text-slate-900">${total}</span>
                                </div>
                                <button onClick={checkout} className="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200">
                                    Secure Checkout
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const Toast = ({ message, onClose }) => {
            useEffect(() => {
                const timer = setTimeout(onClose, 3000);
                return () => clearTimeout(timer);
            }, [onClose]);

            return (
                <div className="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-2 z-[110] animate-bounce-short">
                    <Icons.Check className="w-4 h-4 text-green-400" />
                    <span className="font-medium text-sm">{message}</span>
                </div>
            );
        }

        // --- Main App Component ---

        const App = () => {
            const [page, setPage] = useState('home');
            const [activeColor, setActiveColor] = useState('#1e3a8a');
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [toast, setToast] = useState(null);

            const addToCart = (item) => {
                setCart([...cart, item]);
                setToast(`Added ${item.name} to cart`);
                if(page === 'mixer') setIsCartOpen(true);
            };

            const removeFromCart = (id) => {
                setCart(cart.filter(item => item.id !== id));
            };

            const checkout = () => {
                setIsCartOpen(false);
                setCart([]);
                setToast("Thank you for your order! It is being processed.");
                setPage('home');
            };

            const renderPage = () => {
                switch(page) {
                    case 'home':
                        return (
                            <>
                                <Hero onCta={() => setPage('mixer')} />
                                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                                    <div className="text-center mb-12">
                                        <h2 className="text-3xl font-bold text-slate-900">Featured Colors</h2>
                                        <p className="text-slate-500 mt-2">Explore our best-selling shades</p>
                                    </div>
                                    <ProductShop addToCart={addToCart} setActiveColor={setActiveColor} />
                                </div>
                            </>
                        );
                    case 'mixer':
                        return (
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <ColorMixer 
                                    activeColor={activeColor} 
                                    setActiveColor={setActiveColor} 
                                    addToCart={addToCart} 
                                />
                            </div>
                        );
                    case 'shop':
                        return (
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                                <ProductShop addToCart={addToCart} setActiveColor={setActiveColor} />
                            </div>
                        );
                    default:
                        return <Hero onCta={() => setPage('mixer')} />;
                }
            };

            return (
                <div className="min-h-screen pb-20">
                    <Nav 
                        cartCount={cart.length} 
                        activePage={page} 
                        setPage={setPage} 
                        toggleCart={() => setIsCartOpen(true)} 
                    />
                    
                    {renderPage()}

                    <CartDrawer 
                        isOpen={isCartOpen} 
                        onClose={() => setIsCartOpen(false)} 
                        cart={cart}
                        removeFromCart={removeFromCart}
                        checkout={checkout}
                    />

                    {toast && <Toast message={toast} onClose={() => setToast(null)} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

