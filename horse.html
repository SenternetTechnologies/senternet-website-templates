<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Horse Allocator - Senternet Technologies</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FDFBF7;
        }
        .wood-texture {
            background-color: #5D4037;
            background-image: repeating-linear-gradient(45deg, #4E342E 25%, transparent 25%, transparent 75%, #4E342E 75%, #4E342E), repeating-linear-gradient(45deg, #4E342E 25%, #5D4037 25%, #5D4037 75%, #4E342E 75%, #4E342E);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
        }
        .animate-pop {
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">

    const { useState } = React;

    // --- LOGIC ENGINE ---
    // The Grid:
    // C0 M1 C2
    // M3 X  M5
    // C6 M7 C8
    //
    // Rules:
    // 1. Top: C0 + M1 + C2 = 12
    // 2. Bottom: C6 + M7 + C8 = 12
    // 3. Left: C0 + M3 + C6 = 12
    // 4. Right: C2 + M5 + C8 = 12
    // 5. Total Sum = User Input (T)
    //
    // Mathematical Derivation:
    // Sum of all 4 side equations = 48
    // Sum of all cells (T) + Sum of Corners = 48
    // THEREFORE: Required Corner Sum = 48 - Total Horses
    
    const generateSpecificStable = (targetTotal) => {
        const SIDE_SUM = 12;
        const requiredCornerSum = 48 - targetTotal;

        // Basic validation based on math limits
        // Max Corner Sum is 24 (if all middles are 0, sides are 12+12=24). 
        // Min Corner Sum is 0.
        // So valid Total range is [24, 48].
        if (requiredCornerSum < 0 || requiredCornerSum > 24) {
            return null; // Not Possible
        }

        let attempts = 0;
        // Try to find a random combination of corners that matches the required sum
        while (attempts < 5000) {
            attempts++;
            
            // Randomly partition requiredCornerSum into 4 corners
            // We need 4 numbers (c0, c2, c6, c8) that sum to requiredCornerSum
            // And also ensure that any pair on a side (e.g., c0+c2) <= 12
            
            let remaining = requiredCornerSum;
            
            // Generate random corners within safe bounds (0 to 12)
            // A corner cannot be > 12 alone. It also restricts its neighbor.
            
            let c0 = Math.floor(Math.random() * Math.min(remaining + 1, 13)); 
            let c2 = Math.floor(Math.random() * Math.min(remaining - c0 + 1, 13));
            let c6 = Math.floor(Math.random() * Math.min(remaining - c0 - c2 + 1, 13));
            let c8 = remaining - c0 - c2 - c6;

            // Check if valid partition
            if (c8 < 0 || c8 > 12) continue;

            // Calculate Middles based on Side Sum 12
            let m1 = SIDE_SUM - (c0 + c2);
            let m3 = SIDE_SUM - (c0 + c6);
            let m5 = SIDE_SUM - (c2 + c8);
            let m7 = SIDE_SUM - (c6 + c8);

            // Check if all middles are valid non-negative integers
            if (m1 >= 0 && m3 >= 0 && m5 >= 0 && m7 >= 0) {
                return [c0, m1, c2, m3, 0, m5, c6, m7, c8];
            }
        }
        return null; // Could not find solution in attempts (rare for valid totals)
    };

    function App() {
        const [totalHorses, setTotalHorses] = useState(28); // Default valid value
        const [numChances, setNumChances] = useState(4);
        const [results, setResults] = useState([]);
        const [status, setStatus] = useState('idle'); // idle, loading, error, success

        const handleAllocation = () => {
            setStatus('loading');
            setResults([]);

            setTimeout(() => {
                // Check Mathematical Possibility first
                if (totalHorses < 24 || totalHorses > 48) {
                    setStatus('error');
                    return;
                }

                const newResults = [];
                for (let i = 0; i < numChances; i++) {
                    const grid = generateSpecificStable(totalHorses);
                    if (grid) {
                        newResults.push(grid);
                    }
                }

                if (newResults.length === 0) {
                    setStatus('error');
                } else {
                    setResults(newResults);
                    setStatus('success');
                }
            }, 600);
        };

        return (
            <div className="min-h-screen flex flex-col justify-between">
                
                {/* Navbar */}
                <nav className="bg-gray-900 text-white p-4 shadow-lg border-b-4 border-amber-600">
                    <div className="container mx-auto flex flex-col md:flex-row justify-between items-center">
                        <div className="flex items-center gap-3 mb-2 md:mb-0">
                            <i className="fa-solid fa-chess-knight text-3xl text-amber-500"></i>
                            <div>
                                <h1 className="text-xl font-bold tracking-wider">SENTERNET TECHNOLOGIES</h1>
                                <p className="text-[10px] text-gray-400 uppercase">Smart Stable Solutions</p>
                            </div>
                        </div>
                        <div className="text-center md:text-right text-xs text-gray-400">
                            <p>Senthilkumar (CEO) | Aranthangi</p>
                            <p>+91 81900 38085</p>
                        </div>
                    </div>
                </nav>

                {/* Main Body */}
                <main className="container mx-auto p-6 flex-grow">
                    
                    {/* Input Panel */}
                    <div className="bg-white rounded-2xl shadow-xl p-6 md:p-8 max-w-4xl mx-auto mb-10 border border-gray-100 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-2 h-full bg-amber-500"></div>
                        
                        <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                            <span className="bg-amber-100 text-amber-800 p-2 rounded-lg"><i className="fa-solid fa-calculator"></i></span>
                            Horse Allocation System
                        </h2>

                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 items-end">
                            {/* Input 1: Total Horses */}
                            <div className="relative">
                                <label className="block text-gray-600 font-semibold mb-2 text-sm">Total Horses Required</label>
                                <div className="relative">
                                    <i className="fa-solid fa-horse absolute left-4 top-3.5 text-gray-400"></i>
                                    <input 
                                        type="number" 
                                        value={totalHorses}
                                        onChange={(e) => setTotalHorses(parseInt(e.target.value) || 0)}
                                        className="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none font-bold text-gray-700"
                                        placeholder="e.g. 28, 32"
                                    />
                                </div>
                                <p className="text-[10px] text-gray-400 mt-1 ml-1">Valid range: 24 - 48</p>
                            </div>

                            {/* Input 2: Chances */}
                            <div className="relative">
                                <label className="block text-gray-600 font-semibold mb-2 text-sm">Number of Chances</label>
                                <div className="relative">
                                    <i className="fa-solid fa-list-ol absolute left-4 top-3.5 text-gray-400"></i>
                                    <input 
                                        type="number" 
                                        value={numChances}
                                        min="1"
                                        max="20"
                                        onChange={(e) => setNumChances(parseInt(e.target.value) || 1)}
                                        className="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none font-bold text-gray-700"
                                    />
                                </div>
                            </div>

                            {/* Action Button */}
                            <button 
                                onClick={handleAllocation}
                                className="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2"
                            >
                                {status === 'loading' ? (
                                    <span className="animate-spin"><i className="fa-solid fa-circle-notch"></i></span>
                                ) : (
                                    <>
                                        Allocate <i className="fa-solid fa-wand-magic-sparkles"></i>
                                    </>
                                )}
                            </button>
                        </div>
                    </div>

                    {/* Results Display */}
                    <div>
                        {/* Error State */}
                        {status === 'error' && (
                            <div className="max-w-2xl mx-auto bg-red-50 border-l-4 border-red-500 p-6 rounded-r shadow-md animate-pop">
                                <div className="flex items-start gap-4">
                                    <i className="fa-solid fa-triangle-exclamation text-2xl text-red-500 mt-1"></i>
                                    <div>
                                        <h3 className="font-bold text-red-700 text-lg">Not Possible / Impossible Allocation</h3>
                                        <p className="text-red-600 mt-1">
                                            Cannot allocate <strong>{totalHorses}</strong> horses while keeping all directional sums at 12.
                                        </p>
                                        <p className="text-sm text-red-500 mt-2 bg-red-100 p-2 rounded inline-block">
                                            <strong>Hint:</strong> Mathematically, the total must be between 24 and 48 for this stable structure.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Success State */}
                        {status === 'success' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                                {results.map((grid, idx) => (
                                    <StableCard key={idx} grid={grid} index={idx + 1} total={totalHorses} />
                                ))}
                            </div>
                        )}

                        {/* Initial State */}
                        {status === 'idle' && (
                            <div className="text-center text-gray-400 mt-12">
                                <i className="fa-solid fa-magnifying-glass-chart text-6xl mb-4 opacity-20"></i>
                                <p>Enter the total horses and click Allocate to see results.</p>
                            </div>
                        )}
                    </div>

                </main>

                {/* Footer - Senternet Branding */}
                <footer className="bg-gray-800 text-gray-300 py-10 mt-10">
                    <div className="container mx-auto px-6">
                        <div className="flex flex-col md:flex-row justify-between items-center gap-6">
                            <div className="text-center md:text-left">
                                <h3 className="text-white font-bold text-lg mb-2">SENTERNET TECHNOLOGIES</h3>
                                <p className="text-sm text-gray-400">Web Design | Graphic Design | Digital Marketing</p>
                            </div>
                            
                            <div className="flex flex-col gap-2 text-sm">
                                <div className="flex items-center gap-3">
                                    <span className="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-amber-500"><i className="fa-solid fa-location-dot"></i></span>
                                    <span>Aranthangi, Pudukkottai</span>
                                </div>
                                <div className="flex items-center gap-3">
                                    <span className="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-green-500"><i className="fa-brands fa-whatsapp"></i></span>
                                    <span>+91 81900 38085</span>
                                </div>
                                <div className="flex items-center gap-3">
                                    <span className="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-red-500"><i className="fa-solid fa-envelope"></i></span>
                                    <span>senternettechnologies@gmail.com</span>
                                </div>
                            </div>
                        </div>
                        <div className="border-t border-gray-700 mt-8 pt-6 text-center text-xs text-gray-500">
                            &copy; 2025 Senternet Technologies. All rights reserved.
                        </div>
                    </div>
                </footer>

            </div>
        );
    }

    // Single Stable Component
    function StableCard({ grid, index, total }) {
        return (
            <div className="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 hover:-translate-y-2 transition-transform duration-300 animate-pop">
                <div className="bg-amber-50 p-3 border-b border-amber-100 flex justify-between items-center">
                    <span className="font-bold text-amber-900">Chance #{index}</span>
                    <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded font-bold border border-green-200">
                        Total: {total}
                    </span>
                </div>
                
                <div className="p-5 flex justify-center bg-stone-50">
                    <div className="grid grid-cols-3 gap-2 p-2 rounded-lg wood-texture shadow-inner w-fit">
                        {grid.map((val, i) => {
                            const isCenter = i === 4;
                            return (
                                <div 
                                    key={i}
                                    className={`
                                        w-12 h-12 flex flex-col items-center justify-center rounded-md font-bold text-xl relative shadow-sm
                                        ${isCenter ? 'bg-black/30 shadow-inner' : 'bg-white text-amber-900'}
                                    `}
                                >
                                    {isCenter ? (
                                        <div className="w-2 h-2 rounded-full bg-white/20"></div>
                                    ) : (
                                        <>
                                            {val}
                                            <i className="fa-solid fa-horse absolute bottom-0.5 right-1 text-[8px] opacity-20"></i>
                                        </>
                                    )}
                                </div>
                            )
                        })}
                    </div>
                </div>

                {/* Validation Labels */}
                <div className="grid grid-cols-2 text-[10px] text-gray-500 border-t border-gray-100 bg-white">
                    <div className="p-2 border-r border-b border-gray-100 flex justify-between">
                        <span>Top Sum</span>
                        <strong className="text-green-600">{grid[0]+grid[1]+grid[2]}</strong>
                    </div>
                    <div className="p-2 border-b border-gray-100 flex justify-between">
                        <span>Bottom Sum</span>
                        <strong className="text-green-600">{grid[6]+grid[7]+grid[8]}</strong>
                    </div>
                    <div className="p-2 border-r border-gray-100 flex justify-between">
                        <span>Left Sum</span>
                        <strong className="text-green-600">{grid[0]+grid[3]+grid[6]}</strong>
                    </div>
                    <div className="p-2 flex justify-between">
                        <span>Right Sum</span>
                        <strong className="text-green-600">{grid[2]+grid[5]+grid[8]}</strong>
                    </div>
                </div>
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

</script>

</body>
</html>


